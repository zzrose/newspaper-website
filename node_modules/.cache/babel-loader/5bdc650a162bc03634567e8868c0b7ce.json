{"ast":null,"code":"var _jsxFileName = \"D:\\\\file\\\\\\u6155\\u8BFE\\u5C31\\u4E1A\\u73EDweb\\u5408\\u96C6\\\\\\u9AD8\\u7EA7\\u6846\\u67B6\\u5F00\\u53D1\\\\react\\u6846\\u67B6\\\\first-app\\\\src\\\\components\\\\Login\\\\index.js\";\nimport React, { Component } from 'react';\nimport { Button, message, Modal, Input } from 'antd';\nimport './style.css';\nimport axios from 'axios';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.showModal = this.showModal.bind(this);\n    this.hideModal = this.hideModal.bind(this);\n    this.changeUser = this.changeUser.bind(this);\n    this.changePassword = this.changePassword.bind(this);\n    this.checkLogin = this.checkLogin.bind(this);\n    this.logout = this.logout.bind(this);\n    this.state = {\n      login: false,\n      modal: false,\n      user: '',\n      password: ''\n    };\n  }\n\n  showModal() {\n    this.setState({\n      modal: true\n    });\n  }\n\n  hideModal() {\n    this.setState({\n      modal: false\n    });\n  }\n\n  changeUser(e) {\n    this.setState({\n      user: e.target.value\n    });\n  }\n\n  changePassword(e) {\n    this.setState({\n      password: e.target.value\n    });\n  }\n\n  checkLogin() {\n    const _this$state = this.state,\n          user = _this$state.user,\n          password = _this$state.password;\n    const url = \"http://www.dell-lee.com/react/api/login.json?user=\".concat(user, \"&password=\").concat(password);\n    axios.get(url, {\n      withCredentials: true\n    }).then(res => {\n      const login = res.data.data.login;\n\n      if (login) {\n        message.success('登陆成功');\n        this.setState({\n          login: true,\n          modal: false\n        });\n      } else {\n        message.error('登陆失败');\n      }\n    });\n  }\n\n  logout() {\n    axios.get('http://www.dell-lee.com/react/api/logout.json', {\n      withCredentials: true\n    }).then(res => {\n      const data = res.data.data;\n\n      if (data.logout) {\n        this.setState({\n          login: false\n        });\n      }\n    });\n  }\n\n  render() {\n    const login = this.state.login;\n    return React.createElement(\"div\", {\n      className: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, login ? React.createElement(Button, {\n      type: \"primary\",\n      onClick: this.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"\\u9000\\u51FA\") : React.createElement(Button, {\n      type: \"primary\",\n      onClick: this.showModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"\\u767B\\u9646\"), React.createElement(Button, {\n      style: {\n        marginLeft: 10\n      },\n      type: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Vip\"), React.createElement(Modal, {\n      title: \"\\u767B\\u9646\",\n      visible: this.state.modal,\n      onOk: this.checkLogin,\n      onCancel: this.hideModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\",\n      style: {\n        marginBottom: 10\n      },\n      value: this.state.user,\n      onChange: this.changeUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\",\n      type: \"password\",\n      value: this.state.password,\n      onChange: this.changePassword,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })));\n  }\n\n  componentDidMount() {\n    axios.get('http://www.dell-lee.com/react/api/isLogin.json', {\n      withCredentials: true\n    }).then(res => {\n      const login = res.data.data.login;\n      this.setState({\n        login\n      });\n    });\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["D:\\file\\慕课就业班web合集\\高级框架开发\\react框架\\first-app\\src\\components\\Login\\index.js"],"names":["React","Component","Button","message","Modal","Input","axios","Login","constructor","props","showModal","bind","hideModal","changeUser","changePassword","checkLogin","logout","state","login","modal","user","password","setState","e","target","value","url","get","withCredentials","then","res","data","success","error","render","marginLeft","marginBottom","componentDidMount"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Button, message, Modal, Input } from 'antd';\r\n\r\nimport './style.css';\r\nimport axios from 'axios';\r\n\r\nclass Login extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.showModal = this.showModal.bind(this);\r\n\t\tthis.hideModal = this.hideModal.bind(this);\r\n\t\tthis.changeUser = this.changeUser.bind(this);\r\n\t\tthis.changePassword = this.changePassword.bind(this);\r\n\t\tthis.checkLogin = this.checkLogin.bind(this);\r\n\t\tthis.logout = this.logout.bind(this);\r\n\t\tthis.state={\r\n\t\t\tlogin: false,\r\n\t\t\tmodal: false,\r\n\t\t\tuser: '',\r\n\t\t\tpassword: ''\r\n\t\t}\r\n\t}\r\n\r\n\tshowModal() {\r\n\t\tthis.setState({\r\n\t\t\tmodal: true\r\n\t\t})\r\n\t}\r\n\r\n\thideModal() {\r\n\t\tthis.setState({\r\n\t\t\tmodal: false\r\n\t\t})\r\n\t}\r\n\r\n\tchangeUser(e) {\r\n\t\tthis.setState({\r\n\t\t\tuser: e.target.value\r\n\t\t})\r\n\t}\r\n\r\n\tchangePassword(e) {\r\n\t\tthis.setState({\r\n\t\t\tpassword: e.target.value\r\n\t\t})\r\n\t}\r\n\r\n\tcheckLogin() {\r\n\t\tconst { user, password } = this.state;\r\n\t\tconst url = `http://www.dell-lee.com/react/api/login.json?user=${user}&password=${password}`;\r\n\t\taxios.get(url,{\r\n\t\t\twithCredentials: true\r\n\t\t}).then(res => {\r\n\t\t\tconst login = res.data.data.login;\r\n\t\t\tif(login){\r\n\t\t\t\tmessage.success('登陆成功');\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tlogin: true,\r\n\t\t\t\t\tmodal: false\r\n\t\t\t\t})\r\n\t\t\t}else {\r\n\t\t\t\tmessage.error('登陆失败');\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tlogout() {\r\n\t\taxios.get('http://www.dell-lee.com/react/api/logout.json', {\r\n\t\t\twithCredentials: true\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tconst data = res.data.data;\r\n\t\t\t\tif(data.logout) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tlogin: false\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { login } = this.state;\r\n\t\treturn(\r\n\t\t\t<div className='login'>\r\n\t\t\t\t{\r\n\t\t\t\t\tlogin ?\r\n\t\t\t\t\t<Button \r\n\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\tonClick={this.logout}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t退出\r\n\t\t\t\t\t</Button> \r\n\t\t\t\t\t:\r\n\t\t\t\t\t<Button \r\n\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\tonClick={this.showModal}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t登陆\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t}\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{marginLeft: 10}}\r\n\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tVip\r\n\t\t\t\t\t</Button> \r\n\t\t\t\t\r\n\t\t\t\t<Modal\r\n          \t\t\ttitle=\"登陆\"\r\n          \t\t\tvisible={this.state.modal}\r\n          \t\t\tonOk={this.checkLogin}\r\n          \t\t\tonCancel={this.hideModal}\r\n        \t\t>\r\n          \t\t\t<Input \r\n          \t\t\t\tplaceholder=\"请输入用户名\" \r\n          \t\t\t\tstyle={{ marginBottom: 10 }}\r\n          \t\t\t\tvalue={this.state.user}\r\n          \t\t\t\tonChange={this.changeUser}\r\n          \t\t\t/>\r\n          \t\t\t<Input\r\n          \t\t\t\tplaceholder=\"请输入密码\"\r\n          \t\t\t\ttype=\"password\"\r\n          \t\t\t\tvalue={this.state.password} \r\n          \t\t\t\tonChange={this.changePassword}\r\n          \t\t\t/>\r\n        \t\t</Modal>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\taxios.get('http://www.dell-lee.com/react/api/isLogin.json', {\r\n\t\t\twithCredentials: true\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tconst login = res.data.data.login;\r\n\t\t\t\tthis.setState({ login })\r\n\t\t\t})\r\n\t}\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}